<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatBoat</title>
    
    <!-- Link to Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
    <!-- Link to Bootstrap JS (at the end of the body for performance) -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

    <!-- Google Fonts Link For Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <!-- Custom CSS -->
    <style>
       /* Sidebar styles */
       .sidebar {
        height: 100%;
        width: 250px;
        position: fixed;
        top: 0;
        left: 0;
        background-color: #343a40; /* Dark background color for the sidebar */
        padding-top: 20px;
    }

    /* User profile styles */
    .user-profile {
        text-align: center;
        margin-bottom: 20px;
    }

    .user-avatar {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background-color: #fff; /* Background color for the user avatar */
        margin: 0 auto;
        padding: 10px;
    }

    .user-name {
        color: #fff; /* Text color for user name */
        margin-top: 10px;
    }

    /* Sidebar navigation links */
    .sidebar-nav {
        padding-left: 20px;
    }

    .sidebar-link {
        display: block;
        padding: 10px 0;
        color: #fff; /* Text color for sidebar links */
        text-decoration: none;
        transition: background-color 0.2s;
    }

    .sidebar-link:hover {
        background-color: #292b2c; /* Hover background color for sidebar links */
    }
      body {
        background-color: white;
      }
      .navbar {
        background-color: #343a40; /* Dark background color for the navigation bar */
      }
      #chat-input {
        border: 1px solid #ccc;
        border-radius: 1px;
        padding: 15px;
        width: 100%;
        min-height: 50px;
        resize: vertical;
      }
      #send-btn {
        margin-top: 10px;
        background-color: #0084ff;
        color: #fff;
        border: none;
        border-radius: 4px;
        padding: 10px 20px;
        cursor: pointer;
        transition: background-color 0.2s;
      }
      #send-btn:hover {
        background-color: #0070cc;
      }
      #answer {
        background-color: #e8e8e8;
      }
    </style>
</head>
<body>
    <!-- Navigation bar -->
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <div class="container-fluid">

            <a href="/download_as_pdf/?id={{user_id}}" style="padding-left:100px;text-align:right;">Download</a>
            <a class="navbar-brand" href="#">ChatBoat</a>
            <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse" id="navbarCollapse" style="">
                <ul class="navbar-nav me-auto mb-2 mb-md-0">
                    <!-- Add your navigation links here if needed -->
                </ul>
                <form class="d-flex">
                    <!-- Add search input and button here if needed -->
                </form>
            </div>
        </div>
    </nav>

    <!---------------------------------------->
    <!-- Bootstrap Grid System -->
    <div class="container-fluid mt-5">
        <div class="row">
            <!-- Sidebar Column (col-4) -->
            <div class="col-md-4">
                <!-- Sidebar -->
                <div class="sidebar mt-5">
                  <!-- User Profile -->
                  <div class="sidebar-content">
                    {% comment %} <div class="user-profile">
                        <div class="user-avatar">
                            <!-- You can place the user's profile picture here -->
                        </div>
                        <div class="user-name">
                            John Doe <!-- Replace with the user's name -->
                        </div>
                    </div> {% endcomment %}

                    <!-- Sidebar Navigation -->
                    <ul class="sidebar-nav">
                      {% for item in question_list %}
                        <li class="sidebar-link"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-left" viewBox="0 0 16 16">
                          <path d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                        </svg>    {{ item.question|truncatewords:5 }} </li>
                      {% endfor %}
                      <hr>
                    </ul>
                  </div>
              </div>
            </div>

            <!-- Content Column (col-8) -->
            <div class="col-md-8">
                <div class="container">
                    <div class="row align-items-start">
                        <div class="col-12">
                            <!-- Content for the left column if needed -->
                        </div>
                        <div class="col-12">
                            <div class="chat-container mt-5">
                                <!-- Loop through question_answers and display cards -->
                                {% for item in question_answers %}
                                <div class="card shadow-sm p-3 mb-5 bg-body-tertiary rounded bg-white">
                                    <div class="card-body">
                                        <h5 class="card-title">Question:</h5>
                                        <p class="card-text">{{ item.question }}</p>
                                    </div>
                                </div>
                                <div id="answer" class="card mb-3 shadow-sm p-3 mb-5 bg-body-tertiary rounded">
                                    <!-- Button to copy text to clipboard -->
            <button onclick="copyToClipboard('Text to be copied')">Copy to Clipboard</button>

                                    <div class="card-body">
                                        <h5 class="card-title">Answer:</h5>
                                        <p class="card-text">{{ item.answer }}</p>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            {% if not question_answers %}
                            <div class="default-text">
                                <h1>ChatBot</h1>
                                <p>Start a conversation and explore the power of AI.<br> Your chat history will be displayed here.</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Typing container with gap between button and input box -->
                <div class="container mt-5">
                    <div class="row justify-content-end">
                        <div class="col-md-12">
                            <div class="typing-container">
                                <form id="chat-form" method="post" action="{% url 'generate_content' %}">
                                    {% csrf_token %}
                                    <div class="typing-textarea pb-5 d-flex align-items-center">
                                        <textarea id="chat-input" name="question" class="rounded-3" spellcheck="false" placeholder="Enter a prompt here" required></textarea>
                                        <button type="submit" id="send-btn" class="btn btn-primary" style="margin-left: 20px;">Send</button>
                                        <!-- Adjust the margin value as needed -->
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Link to Bootstrap JS (at the end of the body for performance) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<!-- Include this script in your Django template -->
<script>
function copyToClipboard(text) {
    const textArea = document.createElement("textarea");
    textArea.value = text;

    // Append the text area to the document
    document.body.appendChild(textArea);

    // Select the text in the text area
    textArea.select();

    // Copy the selected text to the clipboard
    document.execCommand('copy');

    // Remove the temporary text area
    document.body.removeChild(textArea);

    // Optionally, display a success message to the user
    alert("Text copied to clipboard: " + text);
}
</script>

</body>
</html>
